(function(d,m,q,r){function n(a,b){this.element=a;this.settings=d.extend({},p,b);this._defaults=p;this._name="SimpleFlow";this.init()}var p={rowHeight:0,lineWidth:2,lineSpacerWidth:30,lineColour:"#91acb3",canvasElm:".canvas"};d.extend(n.prototype,{init:function(){this.drawLines();var a=this;d(m).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){d(this).trigger("resizeEnd")},250)});d(m).bind("resizeEnd",function(){a.drawLines()})},drawLines:function(){d(this.settings.canvasElm+
" svg.simple-flow").remove();var a=this.getUuid(),b='<svg class="simple-flow simple-flow-defs"><defs><marker id="arrowhead-'+a+'" viewBox="0 0 10 10" refX="8" refY="5"markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" stroke="none" fill="'+this.settings.lineColour+'"/></marker></defs></svg>';d(this.settings.canvasElm).append(b);b=d(this.element);for(var f=0;f<b.length;f++){var c=b.eq(f),e=b.eq(f+1);this.drawLine(c,e,a)}d(".simple-flow-defs").height(10)},
drawLine:function(a,b,f){var c=a.parent(),e=b.parent(),h=this.settings.rowHeight;c.height()>h&&(h=c.height(),this.settings.rowHeight=h);if("undefined"!==typeof b.position()){var g=a.outerHeight(!0)/2;b=b.outerHeight(!0)/2;g+=c.position().top;b+=e.position().top;var k=(c.outerWidth(!0)-c.width())/2,l=(e.outerWidth(!0)-e.width())/2;a=c.position().left+a.outerWidth(!0)+k;e=e.position().left+l;l=e-this.settings.lineSpacerWidth;k=a+this.settings.lineSpacerWidth;c=h+parseInt(c.css("margin-bottom"))/2;g===
b?c=a+","+g+" "+e+","+b:(c=a+","+g+" "+k+","+g+" "+k+","+c+" "+l+","+c+" "+l+","+b+" "+e+","+b,this.settings.rowHeight=0);f='<svg class="simple-flow simple-flow-line"><path d="M'+c+'"style="fill:none;stroke:'+this.settings.lineColour+";stroke-width:"+this.settings.lineWidth+";marker-end:url(#arrowhead-"+f+');" /></svg>';d(this.settings.canvasElm).append(f)}},getUuid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+
"-"+a()+a()+a()}});d.fn.SimpleFlow=function(a){d.data(this,"plugin_SimpleFlow")||d.data(this,"plugin_SimpleFlow",new n(this,a))}})(jQuery,window,document);